<style type="text/css">

	.game-wrap{position: relative;}
	.planted-tree{position: absolute;width:70%;bottom:15%;left: 15%;}
	.tab-wrap{font-size: 0;}
	.tab-wrap .tab{position: relative; line-height: 2.5rem; font-size: 1rem;-webkit-transition: all 0.2s;transition: all 0.2s;}
	.tab-wrap .tab.active{border-bottom: 1px solid #008710;color: #008710;}
	.nav-tips{display:block;position: absolute;right:25%;top:0.5rem; background-color: red;width: 0.5rem;height: 0.5rem;border-radius: 100%;}
	.activity-rule{display: inline-block; position: absolute;top:0; left:0;padding: 1rem;}
	.tips{display: block; position: absolute;top:2.2rem; left:0;padding: 0rem;}
	.water{position: absolute;display: inline-block;left:70%;top:4rem;width:6rem;z-index: 2;}
	.water .bottle{position: absolute; right:0;width:3rem;}
	.water .water-drops{position: absolute; width:2rem;top:2rem;left:1.8rem;_opacity: 0;}

	.no-record{padding: 2rem 0;text-align: center;}

	/*fruit*/
	.fruit{position: absolute; width: 2rem;}
	.fruit-1{width: 1.5rem;}
	.fruit-2{width: 2rem;}
	.fruit-3{width: 2.5rem;}
	.fruit-4{width: 3rem;}
	.fruit-5{width: 3.5rem;}
	.fruit-p1{left: 10.5rem;top: 1.6rem;}
	.fruit-p2{left: 13rem;top: 3rem;}
	.fruit-p3{left: 6.5rem;top: 5rem;}
	.fruit-p4{left: 14rem;top: 8rem;}
	.fruit-p5{left: 0.7rem;top: 9rem;}

	.grap-hand{_display: none; position:absolute;width:1.3rem;top:1rem;left:1rem;z-index: 1;-webkit-transition: all 1s;transition: all 1s;}

	.fruit-hp{position: absolute;left:1.5rem;top:-0.5rem;height:0.5rem;min-width:2rem;background-color: #fff;border: 1px solid #008710;border-radius: 0.8rem;overflow: hidden;font-size: 0;}
	.fruit-hp .hp-value{display: inline-block;height: 100%;/*width:0.5rem;*/ background-color: #c1eaaa;font-size: 0;float:left;border-right:1px solid #fff;}
	.fruit-hp .hp-value:last-child{border-right: none;}
	.fruit-hp .hp-value.active{background-color: #4a8300;}
	.hp-1 span{width: 100%;}
	.hp-2{width: 3rem;}
	.hp-2 span{width: 50%;}
	.hp-3{width: 4rem;}
	.hp-3 span{width: 25%;}
	.hp-4{width: 4rem;}
	.hp-4 span{width: 20%;}
	.hp-5{width: 5rem;}
	.hp-5 span{width: 10%;}

	.fruit-complete-ico{
		display: block;
		width:40%;
		position: absolute;
		right:0;
		top:0;
		z-index: 2;
	}

	/*bottom-tool*/
	.bottom-tool{position: absolute;right:0;bottom:0;padding: 1rem;}
	.gift-box{width: 2.5rem;padding-right: 0.8rem;}
	.bottle-box{width:5rem;}
	.bottle-info{position: absolute;_width: 1rem;height: 1rem;padding: 0 0.3rem;line-height: 1rem;background-color: red; color:#fff;font-size: 0.6rem;border: 1px solid #fff;border-radius: 50%;right:0.8rem;top:-0.2rem;}


	/*list*/
	.list .item{padding: 0.5rem 0.5rem;line-height: 2.5rem;}
	.list .item span{margin-left:0.5rem;}
	.avator{width:2rem;height:2rem;border: 1px solid #209f20;border-radius: 50%;overflow: hidden;}
	.nick-name{display: inline-block;max-width:8rem;}
	.nick-name-info{display: inline-block;max-width:17rem;margin-left:0 !important;vertical-align: middle;}
	/*pop-box*/
	.pop-box{position: fixed;top:0;left:0;width:100%;height:100%;background-color: rgba(0,0,0,0.7);z-index: 10;}
	.pop-box > .body{position: relative; margin-top:5rem; text-align: center;
		position: absolute;left:50%;top:50%;width:100%;
		margin-left:-13.4rem;
		margin-top:-15rem;
		/*-webkit-transform: translateX(-50%,-50%);
		transform: translate(-50%,-50%);*/
	}

	.pop-box > .body > img{width:80%;}
	.pop-box > .body .info{position: absolute;bottom:4.3rem;left:0;width:100%;text-align: center;}
	.operation{position: absolute;bottom:0;left:0;width:100%;}
	.operation .btn{width:6.5rem;margin:1rem 0.8rem;}

	.add-water{position: absolute; right: 2rem; top: -1rem;color:green;font-size: 1.5rem;text-shadow: 0 0 2px #fff;}

	.loader{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;z-index:100000}
	.loader-bar{position:absolute;top:48%;left:50%;width:200px;height:6px;margin-left:-100px;background-color:#fff;border-radius:3px;overflow: hidden;}
	.loader-progress{position:absolute;left:0;top:0;width:0;height:100%;background-color:#209f20;
		-webkit-transition: width 1s;
		transition: width 1s;
		border-radius:3px;
	}
	.animated.bounceOut {
	  -webkit-animation-duration: .6s;
	  animation-duration: .6s;
	}
	.animated.flash{
		-webkit-animation-duration: .3s;
		animation-duration: .3s;
	}
	/*小树飞机*/
	.xs-loader{
		position: absolute;
		width:26%;
		height: 8rem;
		left:50%;
		top: 50%;
		margin-left: -12%;
		margin-top: -26%;
		overflow: hidden;
	}
	.xs-loader > .plane{
		width: 5rem;
		position: absolute;
		left: 0;
		top:50%;
		margin-top: -2rem;
		-webkit-animation: plane 0.5s infinite linear alternate;
		animation: plane 0.5s infinite linear alternate;
	}
	.xs-loader > .plane > .plane-body{
		position: relative;
		width:5rem;
		z-index: 2;
	}

	.xs-loader > .cloud-1{
		position: absolute;
		width:1.5rem;
		bottom: 2rem;
		left:1rem;
		-webkit-animation: cloudOne 1s infinite linear;
		animation: cloudOne 1s infinite linear;

	}
	.xs-loader > .cloud-2{
		position: absolute;
		width:1rem;
		top: 2rem;
		left:2rem;
		-webkit-animation: cloudTwo 2s infinite linear;
		animation: cloudTwo 2s infinite linear;
	}
	.plane-circle-wrap{
		position: absolute;
		right:-1.3rem;
		top:0.78rem;
		width:3rem;
		-webkit-transform: rotateY(60deg);
	    transform: rotateY(60deg);
	}
	.xs-loader .plane-circle{
		width: 100%;
		-webkit-animation: planeRotate .4s infinite linear;
		animation: planeRotate .4s infinite linear;
		z-index: 0;
	}
	@-webkit-keyframes planeRotate {
	  from {
	    -webkit-transform: rotateZ(0deg);
	    transform: rotateZ(0deg);
	  }

	  to {
	     -webkit-transform: rotateZ(360deg);
	    transform: rotateZ(360deg);
	  }
	}
	@keyframes planeRotate {
	  from {
	    -webkit-transform: rotateZ(0deg);
	    transform: rotateZ(0deg);
	  }

	  to {
	     -webkit-transform: rotateZ(360deg);
	    transform: rotateZ(360deg);
	  }
	}

	@-webkit-keyframes plane {
	  from {
	    -webkit-transform: translateY(-8%);
	    transform: translateY(-8%);
	  }

	  to {
	     -webkit-transform: translateY(8%);
	    transform: translateY(8%);
	  }
	}
	@keyframes plane {
	  from {
	    -webkit-transform: translateY(-8%);
	    transform: translateY(-8%);
	  }

	  to {
	     -webkit-transform: translateY(8%);
	    transform: translateY(8%);
	  }
	}

	@-webkit-keyframes cloudOne {
	  from {
	    -webkit-transform: translateX(4rem);
	    transform: translateX(4rem);
	  }

	  to {
	     -webkit-transform: translateX(-2rem);
	    transform: translateX(-2rem);
	  }
	}
	@keyframes cloudOne {
	  from {
	    -webkit-transform: translateX(4rem);
	    transform: translateX(4rem);
	  }

	  to {
	     -webkit-transform: translateX(-2rem);
	    transform: translateX(-2rem);
	  }
	}

	@-webkit-keyframes cloudTwo {
	  from {
	    -webkit-transform: translateX(8rem);
	    transform: translateX(8rem);
	  }

	  to {
	     -webkit-transform: translateX(-3rem);
	    transform: translateX(-3rem);
	  }
	}
	@keyframes cloudTwo {
	  from {
	    -webkit-transform: translateX(8rem);
	    transform: translateX(8rem);
	  }

	  to {
	     -webkit-transform: translateX(-3rem);
	    transform: translateX(-3rem);
	  }
	}
	/*小树飞机 end*/

</style>
<div class="loader" style="display: block !important;">
	<div class="xs-loader">
		<img class="cloud-2" src="/public/img/loader/cloud_2.png">
		<div class="plane">
			<div class="plane-circle-wrap">
				<img class="plane-circle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABcCAMAAAA27TkTAAAAkFBMVEUAAADe9//e9//e9//e9//e9//f+P/e9//e9//e9//e9//e9//e9//e9//f+P/e9//e9//e9//f9//e9//w+//e9//q+v/e9//g+P/3/f/e9//i+P/o+v/e9//n+v/e9//e9//e9//u+//e9//r+v/u+//e9//////w/P/4/v/r+//j+f/7/v/n+v/z/P/1/f/r1MOLAAAAJnRSTlMAEPvhIECAMPCx+KBg0JBQwHD9avDm3rie/ezUysrBv4h5+lvt6116hyYAAAN/SURBVGje7ZnZbtswEEWHi0Tt8lIvWZqkTTumF9n//3dtSTlUQpmiaOel7XkRLMAHg8s7IAzDX46IijiOpzfXTvMS2SS9ubvOWZJOI7g5vEpYJeATiCZJPiAON8cEPgOe2+ZIc616muRds/i2YohZgnJzd7eVPx/j4KzIhHWmK56zDFvkpmUrH4qgpDtDizSjqGndhuOTGJ/H20TRgxEbt+FuOS79PDlPw0tttt2G7ZKPUJekDb1Cg3Fb7CsyVi0W1MstkS7EOPUcFYPug3o9h2Gqszqdebob9XqWDqqL9hhJSdHPvUUN/ToQusBIqxmip3uPZ5hTTtjUqP3cEtFPXk3arKm3GzvQ1LXpRD3XFH3dO+xC1xfdbSKvFH3dB3wPfdUmq+6xToRn6O1u8AMZ16HGHw4y0R15QG/3CS1Kk26HONfrSP3de7SgekHz+P3YXD0y9HZL7CEjKth3g8epriF6uw/YS2UnziKvsVFa/esdPGJGXbOBse37EtE1OKvf3Knu9vedt3uPF8j0vZhCC0F1ksXvFKWf+4iXoIU6TSTnSHQvl/prew83XuarcpVtKG0fyemcZTPkdmZH2n3RMKEjeeOwc7h1/wZCEW1TOKrHo3GbaHrdDbpYKRtyHfdEt+SsdUQjdf+cJMo20YHHKm6+bZ2uaKTunxtupJCqhKJNH3JvuSW6oZE6vVSPrz5Um35OzQc3DvGifxp0Yn+ytXY0UvVvgLRTEGw3R+OMRg4dpLkhuu4vGyfHRrsbHIQZKzFuJ9sdojyit5uo1Fv3MFKij9s0hBTe7kPj7y6Ievi6d4h+7hZ/t0QMdS/d5tMefXmw3I/OjjToz8pyrzfuxfSnstx1YNA2teUWdxcWEkdCBVjI3qD3OJYMbJaBu2Jf9DZx0K7YfAMbfrKOMAgOPfxw3vMhW2mIrV0JjcSGHM2uhEOglycTdDAp9MO31q6EnqTNY7sr4azgEnyG15FxuEhF8RpoBQ4WeA0LcCHwGgQ4eQmPfPYCAzxjKM8wBGEYBiMwLL/HEO4JeCCykGYL8IKz8YFw8IQwimOgjIA/6WxM+VIYxTzzj3oOI+HlzG/oksN46oQOJ53UEMY8mblnTuYQzpxRRzu0ORyxvqd94vu1gBvAi9UCKT1bKS5WBb/tn6N1/Ic6EvBPw5O8hs+CT0tM4wg+CV7k5RT+cxt+ASOvjxQLIwv1AAAAAElFTkSuQmCC">
			</div>
			<img class="plane-body" src="data:image/png;base64,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">
		</div>
		<img class="cloud-1" src="/public/img/loader/cloud_1.png">
		<div style="position: absolute;width:100%;bottom: 0rem;font-size: 0.9rem;" class="tc color-666">努力加载中...</div>
	</div>
	<div class="loader-bar none">
		<div class="loader-progress" id="loader-progress"></div>
	</div>
</div>
<div class="none" id="app">
	<img style="position:absolute;top:0;left:0; width:0" src="http://image.xiaoshushidai.com/public/attachment/201703/01/17/20170301174923729.png">
	<div class="game-wrap">
		<img class="w-100 block" src="../public/img/main_bg.png">
		<div class="game-mask"></div>
		<a class="activity-rule color-fff f1" href="/rule/2">活动规则</a>
		<span class="tips w-100 tc none">果子尚未成熟~需要继续浇水哦</span>
		<div class="water none">
			<img class="bottle" src="../public/img/bottle.png">
			<img class="water-drops animated flash none" src="../public/img/water_drops.png">
		</div>
		<div class="planted-tree">
			<img class="w-100 inline-block" src="../public/img/main_tree.png">
			<div class="game-mask"></div>
			<img class="grap-hand animated _shake" @click="openFruit(hand_fruit.index,hand_fruit.id)" src="../public/img/grap_hand.png">
			<div v-for="(fruit, key) in fruit_list">
				<div class="fruit _fruit-1 _fruit-p1" v-bind:class="[fruit_class[key]]" v-show="(fruit_list[key].watered_count > 0)" @click="openFruit(fruit.index,fruit.id)">
					<!-- <img class="grap-hand animated _shake" v-show="(fruit_list[key].watered_count >= fruit_list[key].total_required_water_count) && (fruit_list[key].is_opened == 0)" src="../public/img/grap_hand.png"> -->
					<div class="fruit-hp" v-bind:class="[fruit_hp_class[key]]"  v-show="!(fruit_list[key].watered_count >= fruit_list[key].total_required_water_count)">
						<span class="hp-value active" v-for="n in (fruit_list[key].watered_count)"></span>
						<span class="hp-value" v-for="i in ((fruit_list[key].total_required_water_count - fruit_list[key].watered_count))"></span>
					</div>
					<img class="fruit-complete-ico" v-show="fruit_list[key].is_opened == 1" src="public/img/completeico.png">
					<img class="w-100 bounceIn" v-bind:class="{ animated: (fruit_list[key].watered_count > 0) }" src="../public/img/fruit.png">
				</div>
			</div>
		</div>
		<div class="bottom-tool">
			<!-- <div class="gift-box inline-block" @click="switchNav(2)" v-show="false">
				<img class="w-100 animated infinite _tada" src="../public/img/gift_box.png">
			</div> -->
			<div class="bottle-box inline-block" @click="water">
				<div class="add-water bounceIn none">+</div>
				<div class="bottle-info tc">{{ user_info.watering_able_count }}</div>
				<img class="w-100 flash _infinite" v-bind:class="{ animated: !is_can_water }" src="../public/img/water_bottle.png">
			</div>
		</div>
	</div>
	<div class="tab-wrap">
		<div class="tab inline-block tc w-50 border-right-line border-bottom-line" v-bind:class="{ active:(nav_index == 1) }" @click="switchNav(1)">
			<span class="f2">成长记录</span>
		</div>
		<div class="tab inline-block tc w-50 border-bottom-line" v-bind:class="{ active:(nav_index == 2) }" @click="switchNav(2)">
			<span class="nav-tips" v-show="has_new_gift"></span>
			<span class="f2">我的礼品</span>
		</div>
	</div>
	<div class="tab-content-wrap">
		<div class="tab-content" id="growth-log" v-show="nav_index == 1">
			<div class="no-record" id="none-growth-tips" v-if="growth_log.length < 1">
				<span class="color-gray">暂无记录哦~</span>
			</div>
			<ul class="growth-list list" v-if="growth_log.length > 0">
				<li class="item" v-for="log in growth_log">
					<span class="vm inline-block avator bg-cover" v-bind:style="{backgroundImage: 'url(' + (log.avatar_url || '../public/img/defualt_avatar.png') + ')'}" >
						<!-- <img class="w-100" src="../public/img/fruit.png"> -->
					</span>
					<span class="nick-name-info nowrap">
						<span class="vm nick-name nowrap">
							{{ log.nick_name }}
						</span>
						<span class="log-info color-666">
							{{ log.info }}
						</span>
					</span>
					<span class="create-time fr color-666">
						{{ log.create_time }}
					</span>
				</li>
				<li class="tc item" id="growth-more-btn" v-show="growth_log_index < growth_total_page" @click="addGrowthLog">
					<div class="data-loader" v-show="loader.is_loading">
					    <svg class="circular" viewBox="25 25 50 50">
					      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
					    </svg> 
					</div>
					<a v-show="!loader.is_loading" class="color-000" href="javascript:">点击查看更多</a>
				</li>
			</ul>
		</div>
		<div class="tab-content" id="my-gift" v-show="nav_index == 2">
			<div class="no-record" id="none-gift-tips" v-if="gift_log.length < 1">
				<span class="color-gray">暂无记录哦~</span>
			</div>
			<ul class="growth-list list" v-if="gift_log.length > 0">
				<li class="item" v-for="log in gift_log">
					<span class="vm inline-block avator bg-cover" v-bind:style="{backgroundImage: 'url(' + (log.avatar_url || '../public/img/defualt_avatar.png') + ')'}">
						<!-- <img class="w-100" src="../public/img/fruit.png"> -->
					</span>
					<span class="nick-name-info nowrap">
						<span class="vm nick-name nowrap">
							{{ log.nick_name }}
						</span>
						<span class="log-info color-666">
							{{ log.info }}
						</span>
					</span>

					<a class="create-time fr color-link" v-bind:href="'/my-gift/' + log.gift_id" v-if="(log.is_received == 1 && log.type_id != 4 && log.is_change != 1 && log.is_received_log != 1)">
						查看详情  
					</a>
					<span class="create-time fr" v-else-if="(log.is_change == 1 && log.type_id == 3)">已兑换</span>
					<span class="create-time fr color-link" v-else-if="log.is_received == 0" @click="openPopBox(log,log.info)">马上领取</span>
					<span class="create-time fr" v-else-if="log.is_received == 2">已送出</span>
					<span class="create-time fr" v-else-if="log.is_received_log == 1">已被领取</span>
				</li>
				<li class="tc item" id="gift-more-btn" v-show="gift_log_index < gift_total_page" @click="addGiftLog">
					<div class="data-loader" v-show="loader.is_loading">
					    <svg class="circular" viewBox="25 25 50 50">
					      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
					    </svg> 
					</div>
					<a v-show="!loader.is_loading" class="color-000" href="javascript:">点击查看更多</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="pop-box" v-bind:class="{ none: pop.isHide }">
		<div class="body _animated bounceIn" v-bind:class="{ animated: !pop.isHide, bounceOut: pop.fadeOut }">
			<img class="w-100" v-bind:src="pop.bg">
			<div class="info">
				<span>{{ pop.content }}</span>
			</div>
			<div class="operation">
				<img @click="closePopBox" class="btn" src="../public/img/refuse_btn.png">
				<img @click="recieveGift" class="btn" src="../public/img/recieve_btn.png">
			</div>
		</div>
	</div>
	<div class="none">
		<img class="w-100" src="../public/img/achieve_virtual_tips.png">
		<img class="w-100" src="../public/img/achieve_money_tips.png">
		<img class="w-100" src="../public/img/achieve_invest_tips.png">
		<img class="w-100" src="../public/img/achieve_ticket_tips.png">
		<img class="w-100" src="../public/img/achieve_water_count.png">
	</div>
</div>
<script type="text/javascript" src="/public/js/libs/vue.js"></script>
<script type="text/javascript">
	$(function(){	
		var app = new Vue({
		  el: '#app',
		  data: {
		    message: 'Hello Vue!',
		    open_id: '<%= open_id %>',
		    user_id: '<%= user_info.user_id %>',
		    user_info: {watering_able_count:7},
		    fruit_list: [
				{
					index: 1, // 果子编号
					watered_count: 0, // 已浇水次数
					total_required_water_count: 1, //总共需要浇水几次 
					is_opened: 0, // 是否打开果子(0-未打开, 1-已打开)
				},
				{
					index: 2, // 果子编号
					watered_count: 0, // 已浇水次数
					total_required_water_count: 2, //总共需要浇水几次 
					is_opened: 0, // 是否打开果子(0-未打开, 1-已打开)
				},
				{
					index: 3, // 果子编号
					watered_count: 0, // 浇水次数
					total_required_water_count: 4, //总共需要浇水几次 
					is_opened: 0, // 是否打开果子(0-未打开, 1-已打开)
				}
				,
				{
					index: 4, // 果子编号
					watered_count: 3, // 浇水次数
					total_required_water_count: 6, //总共需要浇水几次 
					is_opened: 0, // 是否打开果子(0-未打开, 1-已打开)
				}
				,
				{
					index: 5, // 果子编号
					watered_count: 0, // 浇水次数
					total_required_water_count: 8, //总共需要浇水几次 
					is_opened: 0, // 是否打开果子(0-未打开, 1-已打开)
				}
			],
			fruit_class:['fruit-1 fruit-p1','fruit-2 fruit-p2','fruit-3 fruit-p3','fruit-4 fruit-p4', 'fruit-5 fruit-p5'],
			fruit_hp_class:['hp-1','hp-2','hp-3','hp-4','hp-5'],
			nav_index: 1,
		    growth_log: [],
		    gift_log: [],
		    pop:{
		    	isHide: true,
		    	fadeOut: false,
		    	content: '恭喜',
		    	bg:null
		    },
		    growth_log_index: 0,
		    gift_log_index: 0,
		    growth_total_page: 0,
		    gift_total_page: 0,
		    gift_id: null,
		    gift_type_id: 0,
		    gift_bgs:['../public/img/achieve_money_tips.png','../public/img/achieve_invest_tips.png','../public/img/achieve_ticket_tips.png','../public/img/achieve_water_count.png','../public/img/achieve_virtual_tips.png'],
		    has_new_gift: false,
		    loader:{
		    	is_show: true,
		    },
		    none_water_count: 0,
		    is_can_water: true,
		    loader:{
		    	is_loading: false,
		    },
		    hand_fruit:{
		    	index:1,
		    	id: 1
		    }
		  },
		  filters: {
			capitalize: function (value) {
			  if (!value) return ''
			  value = value.toString()
			  return value.charAt(0).toUpperCase() + value.slice(1)
			},
			int: function(value) {
				return parseInt(value);
			}
		},	
		  created: function(){
		  	this.init();
		  },
		  methods: {
		  	init: function(){
		  		var self = this;
		  		// 获取用户信息
		  		this.getUserInfo();

		  		// 获取果子列表
		  		//this.getFruitList();

		  		// 列出成长记录
		  		this.listGrowthLog(1);

		  		// 列出礼品记录
		  		this.listGiftLog(1);

		  		// 查看是否有未领取礼品
		  		this.checkGiftLog();

		  		setTimeout(function(){
		  			self.loader.is_show = false;
		  		},3000);

		  	},
		  	getUserInfo: function(callback){
		  		var self = this;
		  		api_post('',{act: 'get_user_info',open_id: this.open_id},function(ret){
		  			log('>>>>>>>>>>>>>>>>');
					log(ret);
					self.user_info = ret.user_info;
					if(callback){
						callback();
					}
					// 获取果子列表
					self.getFruitList();
				});	
		  	},
		  	getFruitList: function() {
		  		var self = this;
		  		api_post('', {act: 'get_fruit_list', user_id: this.user_info.user_id}, function(ret){
		  			log('果子列表：');
		  			log(ret);
		  			for(var index in ret.fruits){
		  				ret.fruits[index].watered_count = parseInt(ret.fruits[index].watered_count); 
		  				ret.fruits[index].total_required_water_count = parseInt(ret.fruits[index].total_required_water_count); 
		  				ret.fruits[index].is_opened = parseInt(ret.fruits[index].is_opened);
		  			}
		  			self.fruit_list = ret.fruits;

		  			// update grap hand status & position
		  			self.updateHandPosition();

		  			if($('#app').hasClass('none')){
		  				$('#app').removeClass('none');
		  				loader.loaderUpdate(loader.assets.length + 1);
		  			}
		  		});
		  	},
		  	updateHandPosition: function() {
		  		var has_can_open = false;
		  		for(var index in this.fruit_list){
		  			var fruit = this.fruit_list[index];
		  			if(fruit.is_opened == 0 && fruit.watered_count >= fruit.total_required_water_count){
		  				log('.fruit-' + (parseInt(index)+1));
		  				log($('.fruit-' + (parseInt(index)+1)));
		  				var $fruit = $('.fruit-' + (parseInt(index)+1));
		  				$('.grap-hand').css({
		  					left: (parseInt($fruit.css('left')) + parseInt($fruit.width())) + 'px',
		  					top: (parseInt($fruit.css('top'))) + 'px',
		  				});
		  				this.hand_fruit.index = fruit.index;
		  				this.hand_fruit.id = fruit.id;
		  				has_can_open = true;
		  				break;
		  			}
		  		}
		  		if(!has_can_open){
		  			$('.grap-hand').addClass('none');
		  		}else{
		  			$('.grap-hand').removeClass('none');
		  		}
		  	},
		  	addGrowthLog: function(){
		  		var self = this;
		  		if(this.growth_log_index < this.growth_total_page){
		  			this.loader.is_loading = true;
		  			this.listGrowthLog(this.growth_log_index + 1,function(){
		  				self.loader.is_loading = false;
		  			});
		  		}
		  	},	
		  	listGrowthLog: function(page,callback){
		  		this.growth_log_index = parseInt(page);
		  		var self = this;
		  		var post_data = {act:'get_growth_log', user_id: this.user_id, page: page, page_count:5};
		  		log(post_data);
		  		api_post('', post_data, function(ret){
		  			if(ret.status == 1){
		  				log('成长记录：');
		  				log(ret);
		  				//alert(ret.total_page);
		  				self.growth_total_page = parseInt(ret.total_page);
		  				// for(var i in  ret.growth_log){
		  				// 	self.growth_log.push(ret.growth_log[i]);
		  				// }
		  				self.growth_log = ret.growth_log;
		  				if(callback) callback();
		  				log(self.growth_log);
		  				//self.growth_log = ret.growth_log;

		  			}
		  		});
		  	},
		  	getGrowthLog: function(page) {
		  		
		  	},
		  	addGiftLog: function(){
		  		var self = this;
		  		if(this.gift_log_index < this.gift_total_page){
		  			this.loader.is_loading = true;
		  			this.listGiftLog(this.gift_log_index + 1,function(){
		  				self.loader.is_loading = false;
		  			});
		  		}
		  	},
		  	listGiftLog: function(page,callback) {
		  		var self = this;
		  		this.gift_log_index = parseInt(page);
		  		var post_data = {act:'get_gift_log', user_id: this.user_id, page: page, page_count:5};
		  		log(post_data);
		  		api_post('', post_data, function(ret){
		  			if(ret.status == 1){
		  				log('礼品记录：');
		  				log(ret);
		  				self.gift_total_page = parseInt(ret.total_page);
		  				//alert(ret.total_page);
		  				// for(var i in ret.log_list){
		  				// 	self.gift_log.push(ret.log_list[i]);
		  				// }
		  				if(callback) callback();
		  				self.gift_log = ret.log_list;
		  				//self.growth_log = ret.growth_log;
		  			}
		  		});
		  	},
		  	checkGiftLog: function(){
		  		var self = this;
		  		var post_data = {act:'has_gift', user_id: this.user_id};
		  		log('查看是否有未领取的礼品：');
		  		log(post_data);
		  		api_post('', post_data, function(ret){
		  			log(ret);
		  			if(parseInt(ret.data.has_gift) > 0){
		  				self.has_new_gift = true;
		  			}else{
		  				self.has_new_gift = false;
		  			}
		  		});
		  	},
		  	// 浇水
		  	water: function() {
				//this.openPopBox(1, '恭喜哦你');
				self = this;
				var fruit_index = 0;
				for(var index in this.fruit_list){
					fruit_index = index;
					var fruit = this.fruit_list[index];
					if(fruit.watered_count < fruit.total_required_water_count){
						break;
					}
				}
				if(parseInt(this.user_info.watering_able_count) < 1){
					// this.none_water_count++;
					// if(this.none_water_count > 1){
					// 	this.none_water_count = 0;
					// 	showShareTips();
					// 	return;
					// }
					dialog.error('小主您的浇水次数不足啦！<br>点击右上角转发给朋友送您浇水次数吧~');
					return;
				}

				if(parseInt(this.user_info.watering_able_count) > 0 && this.fruit_list[fruit_index].watered_count < this.fruit_list[fruit_index].total_required_water_count){
					if(!self.is_can_water){
						return;
					}else{
						self.is_can_water = false;
					}
					//log('执行浇水');
					api_post('', {act: 'water',user_id: this.user_info.user_id, t_user_id: this.user_info.user_id, fruit_id: this.fruit_list[fruit_index].id}, function(ret){
						// 浇水结果
						log('浇水结果:');
						log(ret);
						if(ret.status == 1){
							self.waterAnimate(function(){
									//self.getFruitList();
								if(ret.show_err) dialog.success(ret.show_err,1500);
							});	
							self.getUserInfo(function(){
								
							});
						}
						self.is_can_water = true;
					});
				}else{
					dialog.error('小主您今天已结满果实啦~明天再来吧！');
				}
		  	},
		  	waterAnimate: function(callback) {
		  		$('.water').removeClass('none').children('.bottle').addClass('rotate');

		  		setTimeout(function(){
		  			$('.water').children('.water-drops').removeClass('none').addClass('flash');
		  		},500);

		  		setTimeout(function(){
		  			$('.water').addClass('none').children('.bottle').removeClass('rotate');
		  			$('.water').children('.water-drops').addClass('none').removeClass('flash');

		  			if(callback) callback();
		  		},1000);
		  	},
		  	openFruit: function(index, id) {
		  		var self = this;
		  		//alert(index);
		  		var fruit = this.fruit_list[index-1];

		  		if(fruit.is_opened > 0 || fruit.watered_count < fruit.total_required_water_count){
		  			return;
		  		}
		  		var post_data = {act: 'open_fruit', user_id: this.user_id, fruit_index: index, fruit_id: id,user_type: this.user_info.user_type};
		  		log('打开果子的post数据');
		  		log(post_data);
		  		api_post('',post_data , function(ret){
		  			
		  			log('打开果子：');
		  			log(ret);
		  			var content = '';
		  			var gift = ret.data;
		  			var pre = '恭喜你获得';
		  			if(ret.status == 1){
		  				switch(gift.gift_type){
		  					case 1:
		  					content = pre + gift.gift_value + '元现金红包';
		  					break;
		  					case 2:
		  					content = pre + gift.gift_value + '元理财券';
		  					break;
		  					case 3:
		  					content = pre + '1张小树券';
		  					break;
		  					case 4:
		  					content = pre + '1次浇水机会';
		  					break;
		  					case 5:
		  					content = pre + gift.gift_name;
		  					break;
		  				}	
		  				if(gift.gift_type == 4){
		  					self.gift_id = gift.id;
		  					self.gift_type_id = gift.gift_type;
		  					self.recieveGift(function(){
		  						// 加浇水机会
		  						dialog.success('获得一次浇水机会！',2000);
		  						self.addWaterCountAnimation();
		  					});
		  				}else{
		  					self.openPopBox(gift, content);
		  				}
		  				self.getUserInfo();
		  				self.listGiftLog(self.gift_log_index);
		  				self.checkGiftLog();
		  			}
		  		});
		  	},
		  	openGift: function(){

		  	},
		  	recieveGift: function(callback) {
		  		var self = this;
		  		if(!self.user_info.is_binded_mobile && self.gift_type_id != 4){
		  			window.location.href = '/verify-mobile/' + this.gift_id;
		  			return;
		  		}
		  		api_post('', {act:'receive_gift', id: this.gift_id, user_id: this.user_id}, function(ret){
		  			log('领取礼物');
		  			log(ret);
		  			if(ret.status == 1){
		  				dialog.success(ret.show_err, 3000);
		  				if(typeof callback == 'function') callback();
		  				self.listGiftLog(self.gift_log_index);
		  				self.closePopBox();
		  				if(self.gift_type_id != 4){
		  					window.location.href = '/my-gift/' + self.gift_id;
		  				}
		  			}
		  		});
		  		//this.closePopBox();
		  	},
		  	openPopBox: function(gift, content) {
		  		this.gift_id = gift.id || gift.gift_id;
		  		this.gift_type_id = gift.type_id;
		  		this.pop.content = content;
		  		this.pop.bg = this.gift_bgs[((gift.gift_type || gift.type_id)-1)];
		  		this.pop.isHide = false;
		  		// log
		  		// this.$pop.removeClass('none').children('.body').addClass('animated');
		  		// this.$pop.find('.info span').text(content || '?????');
		  	},
		  	closePopBox:function() {
		  		var self = this;
		  		this.pop.fadeOut = true;
		  		setTimeout(function(){
		  			self.pop.fadeOut = false;
		  			self.pop.isHide = true;
		  		},600);
		  		// this.$pop.addClass('none').children('.body').removeClass('animated');
		  		// this.$pop.find('.info span').text('');
		  	},
		  	switchNav: function(index) {
		  		this.nav_index = index;
		  		if(index == 1){
		  			this.listGrowthLog(this.growth_log_index);
		  		}else if(index == 2){
		  			this.listGiftLog(this.gift_log_index);
		  		}
		  	},
		  	addWaterCountAnimation: function(){
		  		$('.add-water').addClass('animated').removeClass('none');
		  		setTimeout(function(){
		  			$('.add-water').removeClass('animated').addClass('none');
		  		}, 1500);
		  	}
		  }

		})


		;(function(){
			var imageBase = '/public/img/';
			var $loader_pro = $('#loader-progress');
			function Loader(){
				this.init();
			}
			var p = Loader.prototype;
			p.loadedCount = 0;
			p.assets = [];
			p.loadImage = function(images){
				var self = this;
				for(var index in images){
					var img = new Image();
					img.src = images[index];
					img.addEventListener('load',function(){
						self.loadedCount ++;
						//log(this);
						self.loaderUpdate(self.loadedCount);
					});
					this.assets.push(img);
				}	
			}
			p.loaderUpdate = function(count){
				//log(count);
				$loader_pro.css({'width':(parseFloat(count)/this.assets.length +1 )*100+'%'});
				if(count/(this.assets.length + 1) >= 1){
					//game.remove(game.loadProgressText);
					$loader_pro.parent().parent().addClass('animated fadeOut');
	  				setTimeout(function(){
						$loader_pro.parent().parent().remove();
					},1000);
				}
			}
			p.init = function(){
				var self = this;
				self.loadImage([
					imageBase + 'main_bg.png',
					imageBase + 'main_tree.png',
					imageBase + 'fruit.png',
					imageBase + 'water_bottle.png',
					imageBase + 'bottle.png',
					imageBase + 'money_package.png',
					imageBase + 'achieve_invest_tips.png',
					imageBase + 'grap_hand.png',
					imageBase + 'water_drops.png',
					imageBase + 'gift_box.png',
					]);
			}
			var loader = new Loader();
			window.loader = loader;
		})();


	  	wx.ready(function(){
	  		
	  	    wx.onMenuShareAppMessage({
	  	        title: TITLE, // 分享标题
	  	        desc: DESC, // 分享描述
	  	        link: LINK, // 分享链接
	  	        imgUrl: IMAGE_URL, // 分享图标
	  	        type: '', // 分享类型,music、video或link，不填默认为link
	  	        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
	  	        success: function () { 
	  	            // 用户确认分享后执行的回调函数
	  	           	api_post('', {act:'add_water_times', user_id: '<%= user_info.user_id %>', type: '0'}, function(ret){
	  	           		app.getUserInfo();
	  	           	});
	  	        },
	  	        cancel: function () { 
	  	            // 用户取消分享后执行的回调函数
	  	        }
	  	    });

	  	    wx.onMenuShareTimeline({
	  	        title: TITLE, // 分享标题
	  	        link: LINK, // 分享链接
	  	        imgUrl: IMAGE_URL, // 分享图标
	  	        success: function () { 
	  	            // 用户确认分享后执行的回调函数
	  	            api_post('', {act:'add_water_times', user_id: '<%= user_info.user_id %>', type: '1'}, function(ret){
	  	            	app.getUserInfo();
	  	           	});
	  	        },
	  	        cancel: function () { 
	  	            // 用户取消分享后执行的回调函数
	  	        }
	  	    });

	  	    wx.onMenuShareQQ({
	  	        title: TITLE, // 分享标题
	  	        link: LINK, // 分享链接
	  	        imgUrl: IMAGE_URL, // 分享图标
	  	        imgUrl: 'http://image.xiaoshushidai.com/public/attachment/201703/01/17/20170301174923729.png', // 分享图标
	  	        success: function () { 
	  	           // 用户确认分享后执行的回调函数
	  	           api_post('', {act:'add_water_times', user_id: '<%= user_info.user_id %>'}, function(ret){
	  	           		app.getUserInfo();
	  	           	});
	  	        },
	  	        cancel: function () { 
	  	           // 用户取消分享后执行的回调函数
	  	        }
	  	    });

	  	    wx.onMenuShareQZone({
			    title: TITLE + '-分享QQ空间', // 分享标题
	  	        link: LINK, // 分享链接
	  	        imgUrl: IMAGE_URL, // 分享图标
			    imgUrl: 'http://image.xiaoshushidai.com/public/attachment/201703/01/17/20170301174923729.png', // 分享图标
			    success: function () { 
			       // 用户确认分享后执行的回调函数
			       api_post('', {act:'add_water_times', user_id: '<%= user_info.user_id %>'}, function(ret){
			       		app.getUserInfo();
	  	           	});
			    },
			    cancel: function () { 
			        // 用户取消分享后执行的回调函数
			    }
			});

	  	});
	});
</script>